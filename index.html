<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <title>Thomas PPA DISC</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        body { font-family: sans-serif; background: #f0f4f8; padding: 20px; color: #333; }
        .container { max-width: 800px; margin: auto; background: white; padding: 25px; border-radius: 15px; box-shadow: 0 10px 30px rgba(0,0,0,0.1); }
        .block { border: 1px solid #e0e0e0; margin-bottom: 20px; border-radius: 10px; overflow: hidden; }
        .block-title { background: #e8eaf6; padding: 10px; font-weight: bold; color: #1a237e; border-bottom: 1px solid #e0e0e0; }
        .header { background: #1a237e; color: white; display: grid; grid-template-columns: 2fr 1fr 1fr; padding: 12px; font-weight: bold; text-align: center; position: sticky; top: 0; z-index: 100; }
        .row { display: grid; grid-template-columns: 2fr 1fr 1fr; padding: 10px; border-bottom: 1px solid #f0f0f0; align-items: center; }
        .row:hover { background: #fcfcfc; }
        .radio-cell { text-align: center; }
        input[type="radio"] { width: 18px; height: 18px; cursor: pointer; }
        button { width: 100%; padding: 20px; background: #2e7d32; color: white; border: none; border-radius: 8px; font-size: 1.2em; cursor: pointer; font-weight: bold; margin-top: 20px; transition: 0.3s; }
        button:hover { background: #1b5e20; }
        #results { display: none; margin-top: 30px; }
        .charts-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(240px, 1fr)); gap: 20px; }
        .chart-card { background: #fff; border: 1px solid #ddd; padding: 15px; border-radius: 10px; text-align: center; }
    </style>
</head>
<body>

<div class="container">
    <div id="quiz">
        <h1 style="text-align:center; color: #1a237e;">Анкета PPA (24 группы)</h1>
        <p style="text-align:center; color: #666;">Выберите в каждой группе ОДНО слово "Наиболее" (Б) и ОДНО слово "Наименее" (М)</p>
        <div class="header"><div>Список слов</div><div>Б (Наиболее)</div><div>М (Наименее)</div></div>
        <div id="ppa-form"></div>
        <button onclick="calculateDISC()">СГЕНЕРИРОВАТЬ ГРАФИКИ</button>
    </div>

    <div id="results">
        <h2 style="text-align:center; color: #1a237e;">Ваш профиль DISC</h2>
        <div class="charts-grid">
            <div class="chart-card"><canvas id="g1"></canvas><p>I: Поведение на работе</p></div>
            <div class="chart-card"><canvas id="g2"></canvas><p>II: Поведение под давлением</p></div>
            <div class="chart-card"><canvas id="g3"></canvas><p>III: Автопортрет</p></div>
        </div>
        <button onclick="window.print()" style="background: #1a237e;">СОХРАНИТЬ В PDF</button>
        <p style="text-align:center;"><a href="javascript:location.reload()">Сбросить анкету</a></p>
    </div>
</div>

<script>
// Полная база данных слов и ключей
const data = [
    ["Мягкий","Убеждающий","Скромный","Оригинальный"],["Привлекательный","Обязательный","Упорный","Милый"],
    ["Управляемый","Смелый","Верный","Обворожительный"],["Прогрессивный","Любезный","Волевой","Веселый"],
    ["Жизнерадостный","Точный","Отважный","Уравновешенный"],["Соперничающий","Тактичный","Счастливый","Гармоничный"],
    ["Суетливый","Послушный","Непобедимый","Игривый"],["Храбрый","Воодушевляющий","Покорный","Застенчивый"],
    ["Общительный","Терпеливый","Самоуверенный","Учтивый"],["Предприимчивый","Восприимчивый","Искренний","Воздержанный"],
    ["Разговорчивый","Самоуправляемый","Законопослушный","Решительный"],["Утонченный","Смелый","Дипломатичный","Довольный"],
    ["Агрессивный","Душа общества","Безотказный","Боязливый"],["Осторожный","Непреклонный","Убедительный","Добродушный"],
    ["Целеустремленный","Стремящийся","Соглашающийся","Неунывающий"],["Уверенный","Сочувствующий","Терпимый","Напористый"],
    ["Дисциплинированный","Щедрый","Подвижный","Настойчивый"],["Восхитительный","Добрый","Безропотный","Волевой"],
    ["Уважительный","Лидирующий","Оптимистичный","Уживчивый"],["Аргументирующий","Адаптирующийся","Безразличный","Беззаботный"],
    ["Доверчивый","Довольный","Позитивный","Мирный"],["Компанейский","Культурный","Энергичный","Снисходительный"],
    ["Общительный","Аккуратный","Прямолинейный","Сдержанный"],["Неугомонный","Добрососедский","Популярный","Преданный"]
];

const keys = {"Мягкий":["S","I"],"Убеждающий":["Mask","S"],"Скромный":["C","D"],"Оригинальный":["D","C"],"Привлекательный":["I","C"],"Обязательный":["Mask","D"],"Упорный":["D","S"],"Милый":["Mask","Mask"],"Управляемый":["C","D"],"Смелый":["D","S"],"Верный":["S","I"],"Обворожительный":["I","C"],"Прогрессивный":["D","S"],"Любезный":["S","I"],"Волевой":["D","S"],"Веселый":["I","C"],"Жизнерадостный":["I","C"],"Точный":["C","D"],"Отважный":["D","S"],"Уравновешенный":["S","I"],"Соперничающий":["D","S"],"Тактичный":["C","D"],"Счастливый":["I","C"],"Гармоничный":["S","Mask"],"Суетливый":["C","S"],"Послушный":["S","I"],"Непобедимый":["D","S"],"Игривый":["I","C"],"Храбрый":["D","S"],"Воодушевляющий":["I","C"],"Покорный":["C","D"],"Застенчивый":["C","D"],"Общительный":["I","C"],"Терпеливый":["S","I"],"Самоуверенный":["D","S"],"Учтивый":["C","D"],"Предприимчивый":["D","S"],"Восприимчивый":["S","I"],"Искренний":["S","Mask"],"Воздержанный":["C","I"],"Разговорчивый":["I","C"],"Самоуправляемый":["Mask","Mask"],"Законопослушный":["C","D"],"Решительный":["D","S"],"Утонченный":["C","D"],"Смелый":["D","S"],"Дипломатичный":["C","D"],"Довольный":["S","I"],"Агрессивный":["D","S"],"Душа общества":["I","C"],"Безотказный":["Mask","Mask"],"Боязливый":["C","D"],"Осторожный":["C","D"],"Непреклонный":["D","S"],"Убедительный":["Mask","S"],"Добродушный":["S","I"],"Целеустремленный":["S","S"],"Стремящийся":["D","S"],"Соглашающийся":["S","D"],"Неунывающий":["I","C"],"Уверенный":["D","S"],"Сочувствующий":["S","I"],"Терпимый":["C","D"],"Напористый":["D","S"],"Дисциплинированный":["C","D"],"Щедрый":["Mask","Mask"],"Подвижный":["I","C"],"Настойчивый":["D","S"],"Восхитительный":["I","C"],"Добрый":["S","I"],"Безропотный":["S","D"],"Волевой":["Mask","S"],"Уважительный":["C","D"],"Лидирующий":["D","C"],"Оптимистичный":["I","C"],"Уживчивый":["Mask","Mask"],"Аргументирующий":["Mask","S"],"Адаптирующийся":["S","C"],"Безразличный":["C","S"],"Беззаботный":["I","C"],"Доверчивый":["S","C"],"Довольный":["S","I"],"Позитивный":["I","C"],"Мирный":["S","D"],"Компанейский":["I","C"],"Культурный":["C","D"],"Энергичный":["I","C"],"Снисходительный":["S","D"],"Общительный":["Mask","C"],"Аккуратный":["C","D"],"Прямолинейный":["D","S"],"Сдержанный":["S","I"],"Неугомонный":["D","I"],"Добрососедский":["Mask","Mask"],"Популярный":["I","C"],"Преданный":["S","Mask"]};

// Отрисовка формы
const form = document.getElementById('ppa-form');
data.forEach((group, i) => {
    let html = `<div class="block"><div class="block-title">Группа ${i+1}</div>`;
    group.forEach(word => {
        html += `<div class="row"><div>${word}</div>
        <div class="radio-cell"><input type="radio" name="m${i}" value="${word}"></div>
        <div class="radio-cell"><input type="radio" name="l${i}" value="${word}"></div></div>`;
    });
    form.innerHTML += html + `</div>`;
});

function calculateDISC() {
    let g1={D:0,I:0,S:0,C:0}, g2={D:0,I:0,S:0,C:0};
    for(let i=0; i<24; i++) {
        let m = document.querySelector(`input[name="m${i}"]:checked`)?.value;
        let l = document.querySelector(`input[name="l${i}"]:checked`)?.value;
        if(!m || !l) return alert("Заполните группу " + (i+1));
        if(m === l) return alert("Ошибка в группе " + (i+1) + ": нельзя выбрать одно слово и в Б, и в М.");
        if(keys[m][0]!=="Mask") g1[keys[m][0]]++;
        if(keys[l][1]!=="Mask") g2[keys[l][1]]++;
    }
    document.getElementById('quiz').style.display='none';
    document.getElementById('results').style.display='block';
    const draw = (id, sc, min, max) => {
        new Chart(document.getElementById(id), {
            type:'line', data:{labels:['D','I','S','C'], datasets:[{label:'Баллы', data:[sc.D,sc.I,sc.S,sc.C], borderColor:'#1a237e', backgroundColor:'#1a237e', tension:0.1, fill:false}]},
            options:{scales:{y:{min, max, grid:{color:'#e0e0e0'}}}}
        });
    };
    draw('g1', g1, 0, 15); draw('g2', g2, 0, 15);
    draw('g3', {D:g1.D-g2.D, I:g1.I-g2.I, S:g1.S-g2.S, C:g1.C-g2.C}, -10, 15);
}
</script>
</body>
</html>
