<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <title>PPA DISC System</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        body { font-family: sans-serif; background: #f4f7f6; padding: 20px; line-height: 1.5; }
        .container { max-width: 700px; margin: auto; background: white; padding: 20px; border-radius: 10px; box-shadow: 0 4px 10px rgba(0,0,0,0.1); }
        .block { border: 1px solid #ddd; margin-bottom: 20px; border-radius: 8px; background: #fff; }
        .header { background: #1a237e; color: white; display: grid; grid-template-columns: 2fr 1fr 1fr; padding: 10px; font-weight: bold; text-align: center; border-radius: 8px 8px 0 0; }
        .row { display: grid; grid-template-columns: 2fr 1fr 1fr; padding: 10px; border-bottom: 1px solid #eee; align-items: center; }
        .row:last-child { border-bottom: none; }
        button { width: 100%; padding: 20px; background: #2e7d32; color: white; border: none; border-radius: 5px; cursor: pointer; font-size: 18px; font-weight: bold; margin-top: 20px; }
        #results { display: none; }
        .charts { display: grid; grid-template-columns: 1fr 1fr 1fr; gap: 10px; margin-top: 20px; }
        .chart-box { text-align: center; border: 1px solid #eee; padding: 5px; }
    </style>
</head>
<body>
    <div class="container">
        <div id="quiz">
            <h2 style="text-align:center">Тест Профиля Личности (PPA)</h2>
            <div class="header"><div>Список слов</div><div>Б</div><div>М</div></div>
            
            <div class="block">
                <div class="row"><div>Мягкий</div><input type="radio" name="m0" value="Мягкий"> <input type="radio" name="l0" value="Мягкий"></div>
                <div class="row"><div>Убеждающий</div><input type="radio" name="m0" value="Убеждающий"> <input type="radio" name="l0" value="Убеждающий"></div>
                <div class="row"><div>Скромный</div><input type="radio" name="m0" value="Скромный"> <input type="radio" name="l0" value="Скромный"></div>
                <div class="row"><div>Оригинальный</div><input type="radio" name="m0" value="Оригинальный"> <input type="radio" name="l0" value="Оригинальный"></div>
            </div>

            <div class="block">
                <div class="row"><div>Привлекательный</div><input type="radio" name="m1" value="Привлекательный"> <input type="radio" name="l1" value="Привлекательный"></div>
                <div class="row"><div>Обязательный</div><input type="radio" name="m1" value="Обязательный"> <input type="radio" name="l1" value="Обязательный"></div>
                <div class="row"><div>Упорный</div><input type="radio" name="m1" value="Упорный"> <input type="radio" name="l1" value="Упорный"></div>
                <div class="row"><div>Милый</div><input type="radio" name="m1" value="Милый"> <input type="radio" name="l1" value="Милый"></div>
            </div>

            <div class="block">
                <div class="row"><div>Управляемый</div><input type="radio" name="m2" value="Управляемый"> <input type="radio" name="l2" value="Управляемый"></div>
                <div class="row"><div>Смелый</div><input type="radio" name="m2" value="Смелый"> <input type="radio" name="l2" value="Смелый"></div>
                <div class="row"><div>Верный</div><input type="radio" name="m2" value="Верный"> <input type="radio" name="l2" value="Верный"></div>
                <div class="row"><div>Обворожительный</div><input type="radio" name="m2" value="Обворожительный"> <input type="radio" name="l2" value="Обворожительный"></div>
            </div>

            <p style="text-align:center; color:#666">... (продолжайте заполнять анкету) ...</p>
            <button onclick="calc()">СГЕНЕРИРОВАТЬ ГРАФИКИ</button>
        </div>

        <div id="results">
            <div class="charts">
                <div class="chart-box"><canvas id="g1"></canvas><p>Работа</p></div>
                <div class="chart-box"><canvas id="g2"></canvas><p>Давление</p></div>
                <div class="chart-box"><canvas id="g3"></canvas><p>Итог</p></div>
            </div>
            <button onclick="window.print()" style="background:#1a237e">ПЕЧАТЬ В PDF</button>
        </div>
    </div>

<script>
const scoring = {
    "Мягкий":["S","I"],"Убеждающий":["Mask","S"],"Скромный":["C","D"],"Оригинальный":["D","C"],
    "Привлекательный":["I","C"],"Обязательный":["Mask","D"],"Упорный":["D","S"],"Милый":["Mask","Mask"],
    "Управляемый":["C","D"],"Смелый":["D","S"],"Верный":["S","I"],"Обворожительный":["I","C"]
};

function calc() {
    let g1={D:0,I:0,S:0,C:0}, g2={D:0,I:0,S:0,C:0};
    for(let i=0; i<3; i++) {
        let m = document.querySelector(`input[name="m${i}"]:checked`)?.value;
        let l = document.querySelector(`input[name="l${i}"]:checked`)?.value;
        if(!m || !l) return alert("Заполните все ряды!");
        if(scoring[m][0]!=="Mask") g1[scoring[m][0]]++;
        if(scoring[l][1]!=="Mask") g2[scoring[l][1]]++;
    }
    document.getElementById('quiz').style.display='none';
    document.getElementById('results').style.display='block';
    
    const draw = (id, sc, min, max) => {
        new Chart(document.getElementById(id), {
            type:'line', data:{labels:['D','I','S','C'], datasets:[{data:[sc.D,sc.I,sc.S,sc.C],borderColor:'#1a237e'}]},
            options:{scales:{y:{min,max}}}
        });
    };
    draw('g1', g1, 0, 5); draw('g2', g2, 0, 5);
    draw('g3', {D:g1.D-g2.D, I:g1.I-g2.I, S:g1.S-g2.S, C:g1.C-g2.C}, -5, 5);
}
</script>
</body>
</html>
